<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>{% block title %}MOA PLUS{% endblock %}</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='bootstrap.min.css') }}" />
  <link rel="icon" type="image/png" href="{{ url_for('static', filename='favicon-16x16.png') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
  
  <style>
    /* ---------- ì „ì—­ ë ˆì´ì•„ì›ƒ ---------- */
    html, body{height:100%;}
    body{
      display:flex;flex-direction:column;min-height:100vh;
      font-family:'Noto Sans KR',sans-serif;
      padding-top: 120px; /* ê³ ì • í—¤ë” ê³µê°„ í™•ë³´ */
    }

    .custom-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 24px 20% 24px; /* í•˜ë‹¨ íŒ¨ë”© ì¤„ì„ */
        flex-wrap: wrap;
        /* ê³ ì • í—¤ë” ìŠ¤íƒ€ì¼ ì¶”ê°€ */
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        z-index: 1000;
        transition: all 0.3s ease;
    }

    /* ìŠ¤í¬ë¡¤ ì‹œ í—¤ë” ìŠ¤íƒ€ì¼ ë³€í™” */
    .custom-header.scrolled {
        background: rgba(255, 255, 255, 0.98);
        box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
        padding: 16px 20% 16px; /* ìŠ¤í¬ë¡¤ ì‹œ íŒ¨ë”© ì¤„ì„ */
    }

    .custom-logo img {
        height: 48px;
        transition: height 0.3s ease;
    }

    /* ìŠ¤í¬ë¡¤ ì‹œ ë¡œê³  í¬ê¸° ì¡°ì • */
    .custom-header.scrolled .custom-logo img {
        height: 40px;
    }

    .custom-nav {
        display: flex;
        gap: 2rem;
        font-family: 'NoonnuBasicGothic', sans-serif;
        font-size: 24px;
        font-weight: 200;
        line-height: 1.3;   
    }

    .custom-nav a {
        text-decoration: none;
        color: #000;
        position: relative;
        padding: 0.5rem 2rem;
        transition: color 0.3s ease;
    }

    .custom-nav a:hover {
        color: #00bfa5;
    }
    .custom-nav a.active {
        color: #00bfa5;  
    }

    .custom-nav .dropdown {
        position: relative;
    }

    .custom-nav .dropdown-menu{
      display:block;position:absolute;top:calc(100% + 8px);left:0;
      background:rgba(255, 255, 255, 0.98);border:none;border-radius:.75rem;
      box-shadow:0 8px 25px rgba(0,0,0,.15);padding:.5rem 0;
      opacity:0;transform:translateY(-10px);
      transition:opacity .2s ease,transform .2s ease;
      pointer-events:none;z-index:1001;min-width:200px;
      backdrop-filter: blur(10px);
    }
    .custom-nav .dropdown-item{
      padding:.75rem 1.5rem;font-size:1rem;color:#333;
      transition:background .2s,color .2s;white-space:nowrap;
    }
    .custom-nav .dropdown-item:hover{background:#f0fdf9;color:#008e76;}
    .custom-nav .dropdown-item + .dropdown-item{margin-top:.25rem;}

    /* ëª¨ë°”ì¼ ë°˜ì‘í˜• */
    @media (max-width:768px){
      body {
        padding-top: 100px; /* ëª¨ë°”ì¼ì—ì„œëŠ” ë” ì‘ì€ íŒ¨ë”© */
      }
      
      .custom-header {
        padding: 16px 5%;
      }
      
      .custom-header.scrolled {
        padding: 12px 5%;
      }
      
      .custom-nav {
        gap: 1rem;
        font-size: 20px;
      }
      
      .custom-nav a {
        padding: 0.5rem 1rem;
      }
      
      .custom-nav .dropdown-menu{
        position:static;transform:none;opacity:1;pointer-events:auto;
        box-shadow:none;background:none;padding:0;margin-top:.5rem;
        backdrop-filter: none;
      }
      .custom-nav .dropdown-item{
        padding:.5rem 0;font-size:1.125rem;color:#000;
      }
    }

    /* ---------- ë¸Œë ˆë“œí¬ëŸ¼ ìŠ¤íƒ€ì¼ ---------- */
    .moa-breadcrumb {
        background-color: transparent;
        padding: 20px 0;
        margin-bottom: 30px;
        font-family: 'NoonnuBasicGothic', sans-serif;
    }

    .breadcrumb-container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
    }

    .breadcrumb-list {
        list-style: none;
        margin: 0;
        padding: 0;
        display: flex;
        align-items: center;
        flex-wrap: wrap;
        justify-content: flex-end;
    }

    .breadcrumb-item {
        display: flex;
        align-items: center;
    }

    .breadcrumb-item:not(:last-child)::after {
        content: '>';
        margin: 0 6px;
        color: #666;
        font-size: 16px;
        font-weight: 400;
    }

    .breadcrumb-link {
        color: #666;
        text-decoration: none;
        font-size: 16px;
        font-weight: 400;
        transition: color 0.2s ease;
    }

    .breadcrumb-link:hover {
        color: #333;
        text-decoration: none;
    }

    .breadcrumb-current {
        color: #333;
        font-size: 16px;
        font-weight: 500;
    }

    /* ::before ê°€ìƒìš”ì†Œë¡œ ì¸í•œ / ë¬¸ì ì œê±° */
    .breadcrumb-current::before,
    .breadcrumb-link::before,
    .breadcrumb-item::before {
        content: none !important;
    }

    /* ë°˜ì‘í˜• ë””ìì¸ */
    @media (max-width: 768px) {
        .breadcrumb-container {
            padding: 0 16px;
        }
        
        .breadcrumb-item:not(:last-child)::after {
            margin: 0 8px;
            font-size: 12px;
        }
        
        .breadcrumb-link,
        .breadcrumb-current {
            font-size: 13px;
        }
    }

    /* ê¸´ í…ìŠ¤íŠ¸ ì²˜ë¦¬ */
    .breadcrumb-item {
        max-width: 200px;
    }

    .breadcrumb-link,
    .breadcrumb-current {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    @media (max-width: 480px) {
        .breadcrumb-item {
            max-width: 120px;
        }
    }

    /* ---------- í‘¸í„° (ì„¸ë¡œ ê¸¸ì´ 2/3ë¡œ ì¶•ì†Œ) ---------- */
    .site-footer{
        background:#EDF2F4;
        color:#000;
        box-shadow:0 -2px 8px rgba(0,0,0,.05);
        font-size:.85rem;
        padding:30px 0 20px 0;  /* ê¸°ì¡´ 60pxì—ì„œ ì¶•ì†Œ */
        margin-top:auto;
    }
    
    .site-footer .row {
        margin: 0;
    }
    
    .site-footer .col-md-4 {
        padding: 0 15px;
    }
    
    .site-footer h5{
        font-size:1.1rem;
        font-weight:600;
        margin-bottom:0.8rem;
        color:#868787;
    }
    
    .site-footer p {
        margin-bottom: 0.4rem !important;
        line-height: 1.4;
        font-size: 0.9rem;
    }
    
    .site-footer .mb-2 {
        margin-bottom: 0.3rem !important;
    }
    
    .site-footer .mb-3 {
        margin-bottom: 0.5rem !important;
    }
    
    .site-footer small {
        font-size: 0.8rem;
        line-height: 1.3;
    }
    
    .site-footer a{
        color:#868787;
        text-decoration:none;
    }
    
    .site-footer a:hover{
        text-decoration:underline;
    }
    
    .site-footer .divider{
        height:1px;
        background:#D1D5DB;
        margin:0.6rem 0;
    }
    
    .site-footer img {
        height: 24px !important; /* ë¡œê³  í¬ê¸° ì¶•ì†Œ */
    }

    /* ---------- ë¶€ë“œëŸ¬ìš´ ìŠ¤í¬ë¡¤ íš¨ê³¼ ---------- */
    html {
        scroll-behavior: smooth;
    }
    #chatbot-button {
  position: fixed;
  bottom: 24px;
  right: 24px;
  width: 100px;
  height: 100px;
  cursor: pointer;
  z-index: 999;
  }
  #chatbot-button img {
    width: 100%;
    height: 100%;
    object-fit: contain;
  }

  #chatbot-box {
    display: none;
    flex-direction: column;
    position: fixed;
    bottom: 80px;
    right: 30px;
    width: 320px;
    height: 420px;
    background: white;
    border: 1px solid #ccc;
    border-radius: 12px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.15);
    z-index: 999;
    overflow: hidden;
  }
  #chatbot-header {
    background: #00c4a8;
    color: white;
    padding: 10px;
    font-weight: bold;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  #chatbot-messages {
    flex-grow: 1;
    padding: 10px;
    overflow-y: auto;
    font-size: 14px;
  }
  #chatbot-input-area {
    display: flex;
    border-top: 1px solid #eee;
  }
  #chatbot-input {
    flex: 1;
    padding: 8px;
    border: none;
    outline: none;
  }
  #chatbot-input-area button {
    padding: 8px 12px;
    background: #00c4a8;
    color: white;
    border: none;
    cursor: pointer;
  }

  </style>
</head>
<body>

<!-- ---------- í—¤ë” ---------- -->
<header class="custom-header" id="mainHeader">
  <a class="custom-logo" href="/">
    <img src="{{ url_for('static', filename='img/logo.png') }}" alt="MOA+ ë¡œê³ ">
  </a>
  <nav class="custom-nav">
    <a href="/deposits" class="{% if request.path == '/deposits' %}active{% endif %}">ì˜ˆê¸ˆ</a>
    <a href="/savings" class="{% if request.path == '/savings' %}active{% endif %}">ì ê¸ˆ</a>
    <a href="/loans" class="{% if request.path == '/loans' %}active{% endif %}">ëŒ€ì¶œ</a>

    <div class="dropdown">
      <a class="nav-link" href="/plus" id="plusDropdown">ëª¨ì•„í”ŒëŸ¬ìŠ¤</a>
      <div class="dropdown-menu" aria-labelledby="plusDropdown">
        <a class="dropdown-item" href="/plus/terms">Step 1. ê¸ˆìœµ, ì´ì œëŠ” ì‰½ê³  ì¬ë¯¸ìˆê²Œ</a>
        <a class="dropdown-item" href="/plus/youth">Step 2. ì²­ë…„ë“¤ì„ ìœ„í•œ ì§€ì› ì‚¬ì—…</a>
        <a class="dropdown-item" href="/guide">Step 3. í•œëˆˆì— ë¹„êµí•˜ê¸° ì‰¬ìš´ ìƒí’ˆ</a>
        <a class="dropdown-item" href="/plus/roadmap">Step 4. ë‹¹ì‹ ì˜ ë¯¸ë˜ë¥¼ ëª¨ìœ¼ëŠ” ì‹œê°„</a>
      </div>
    </div>
  </nav>
</header>

<!-- ---------- ë¸Œë ˆë“œí¬ëŸ¼ ë„¤ë¹„ê²Œì´ì…˜ ---------- -->
{% if breadcrumb and breadcrumb|length >= 1 %}
<nav class="moa-breadcrumb" aria-label="breadcrumb">
    <div class="breadcrumb-container">
        <ol class="breadcrumb-list">
            {% for item in breadcrumb %}
                <li class="breadcrumb-item">
                    {% if item.current %}
                        <span class="breadcrumb-current" title="{{ item.name }}">{{ item.name }}</span>
                    {% else %}
                        <a href="{{ item.url }}" class="breadcrumb-link" title="{{ item.name }}">{{ item.name }}</a>
                    {% endif %}
                </li>
            {% endfor %}
        </ol>
    </div>
</nav>
{% endif %}

<!-- ---------- ë³¸ë¬¸ ---------- -->
<main class="flex-grow-1"><!-- â— mainì€ í•­ìƒ ë‚¨ê²¨ë‘  -->
  {% if not no_container %}
  <div class="container py-5">
  {% endif %}

      {% block content %}{% endblock %}

  {% if not no_container %}
  </div>
  {% endif %}
</main>

<!-- ---------- 3ë‹¨ í‘¸í„° ---------- -->
<footer class="site-footer">
  <div class="container">
    <div class="row gy-4">

      <!-- 1) Project Info -->
      <div class="col-md-4">
        <h5>PROJECT TEAM MOAPLUS</h5>
        <p class="mb-2">ëª¨ì•„í”ŒëŸ¬ìŠ¤, ë” ì‰½ê³  ë˜‘ë˜‘í•˜ê²Œ ê¸ˆìœµì„ ëª¨ìœ¼ë‹¤</p>
        <p class="mb-2">Â© 2025 MOAPLUS. All rights reserved.</p>
        <div class="divider"></div>
        <p class="mb-2"><strong>Development Period</strong><br>2025.05.07 ~ 2025.06.27</p>
        <p class="mb-3"><strong>Data Source</strong><br>ê¸ˆìœµê°ë…ì› ì˜¤í”ˆ API</p>
        <small>
          ë³¸ ì‚¬ì´íŠ¸ëŠ” êµìœ¡ ë° í¬íŠ¸í´ë¦¬ì˜¤ ëª©ì ì´ë©°, ìƒì—…ì  ì‚¬ìš©ì„ ìœ„í•œ ê²ƒì´ ì•„ë‹™ë‹ˆë‹¤.<br>
          <em>This site was created for non-commercial, educational use only.</em>
        </small>
      </div>

      <!-- 2) Tech & Tools -->
      <div class="col-md-4">
        <h5>Tech & Tools</h5>
        <p class="mb-2"><strong>Built With</strong><br>Python, Flask, HTML, CSS, JavaScript</p>
        <p class="mb-2"><strong>Design Tool</strong><br>Figma</p>
        <p><strong>Hosting & Deployment</strong><br>GitHub, Vercel</p>
      </div>

      <!-- 3) Team & Contact -->
      <div class="col-md-4">
        <h5>Team Info & Contact</h5>

        <!-- â–  ë¡œê³  + í•™êµëª… í•œ ì¤„ -->
        <p class="mb-2 d-flex align-items-center gap-2">
          <img src="{{ url_for('static', filename='knu_logo.png') }}"
              alt="ê²½ë¶ëŒ€í•™êµ ë¡œê³ " style="height:28px;">
          <strong class="m-0">ê²½ë¶ëŒ€í•™êµ KDT 7ê¸°</strong>
        </p>

        <!-- íŒ€ì› -->
        <p class="mb-3">ê¹€ìˆ˜ì—°, ë…¸ë™ë¦¼, ì˜¤ìœ ì†”, ìµœìˆ˜ì°½</p>

        <p class="mb-3">
          <a href="mailto:moaplus.help@gmail.com">moaplus.help@gmail.com</a>
        </p>

        <p class="mb-3">
          <a href="#">ì´ìš©ì•½ê´€</a> |
          <a href="#">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a> |
          <a href="#">ì˜¤í”ˆì†ŒìŠ¤ ë¼ì´ì„ ìŠ¤</a>
        </p>

        <p class="mb-0"><strong>Follow us</strong></p>
        <p>
          <a href="#" class="me-2">Facebook</a>
          <a href="#" class="me-2">Twitter</a>
          <a href="#">Instagram</a>
        </p>
      </div>
    </div>
  </div>
</footer>
<!-- ğŸ’¬ ì±—ë´‡ ë§í’ì„  ë²„íŠ¼ -->
<div id="chatbot-button" onclick="toggleChatbot()">
  <img src="{{ url_for('static', filename='img/chatbot2.png') }}" alt="ì±—ë´‡" />
</div>

<!-- ğŸ’¬ ì±—ë´‡ ëŒ€í™”ì°½ -->
<div id="chatbot-box">
  <div id="chatbot-header">
    ğŸŒ± ëª¨ì•„ì±—ë´‡
    <button onclick="toggleChatbot()">âœ–</button>
  </div>
  <div id="chatbot-messages"></div>
  <div id="chatbot-input-area">
    <input type="text" id="chatbot-input" placeholder="ì§ˆë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”..." onkeydown="if(event.key==='Enter') sendChat()" />
    <button onclick="sendChat()">ì „ì†¡</button>
  </div>
</div>
<!-- ---------- ìŠ¤í¬ë¦½íŠ¸ ---------- -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>
/* ë“œë¡­ë‹¤ìš´ í˜¸ë²„ */
document.querySelectorAll('.custom-nav .dropdown').forEach(dropdown=>{
  let t;
  dropdown.addEventListener('mouseenter',()=>{
      clearTimeout(t);
      const m=dropdown.querySelector('.dropdown-menu');
      m.style.opacity='1';m.style.transform='translateY(0)';m.style.pointerEvents='auto';
  });
  dropdown.addEventListener('mouseleave',()=>{
      t=setTimeout(()=>{
          const m=dropdown.querySelector('.dropdown-menu');
          m.style.opacity='0';m.style.transform='translateY(-10px)';m.style.pointerEvents='none';
      },1000);
  });
});

/* ìŠ¤í¬ë¡¤ ì‹œ í—¤ë” ìŠ¤íƒ€ì¼ ë³€ê²½ */
window.addEventListener('scroll', function() {
    const header = document.getElementById('mainHeader');
    
    if (window.scrollY > 50) {
        header.classList.add('scrolled');
    } else {
        header.classList.remove('scrolled');
    }
});

/* í˜ì´ì§€ ë¡œë“œ ì‹œ ìŠ¤í¬ë¡¤ ìœ„ì¹˜ í™•ì¸ */
document.addEventListener('DOMContentLoaded', function() {
    const header = document.getElementById('mainHeader');
    
    if (window.scrollY > 50) {
        header.classList.add('scrolled');
    }
});

function toggleChatbot() {
  const box = document.getElementById("chatbot-box");
  const messages = document.getElementById("chatbot-messages");

  if (box.style.display === "flex") {
    box.style.display = "none";
    messages.innerHTML = "";  
  } else {
    box.style.display = "flex";
    messages.innerHTML = `<div><strong>ğŸ¤–</strong> ë°˜ê°€ì›Œìš”! ì €ëŠ” ë˜‘ë˜‘í•œ ê¸ˆìœµ ì¹œêµ¬, ëª¨ë‹ˆì˜ˆìš”  ê¶ê¸ˆí•œ ê±´ ë­ë“  ë¬¼ì–´ë³´ì„¸ìš”! </div>`; 
  }
}

async function sendChat() {
  const input = document.getElementById("chatbot-input");
  const message = input.value.trim();
  if (!message) return;

  const messages = document.getElementById("chatbot-messages");
  messages.innerHTML += `<div><strong>ğŸ™‹â€â™‚ï¸</strong> ${message}</div>`;
  input.value = "";

  const res = await fetch("/chat", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ message: message })
  });

  const data = await res.json();
  messages.innerHTML += `<div><strong>ğŸ¤–</strong> ${data.response}</div>`;
  messages.scrollTop = messages.scrollHeight;
}

</script>

</body>
</html>
